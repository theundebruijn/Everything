import flyd from 'flyd';

/**
 * Wrapper object. We need to use this syntax to support vscode intellisense.
 * Using Object.create(null) doesn't do this.
 */
const FRP = {};

FRP.streams = {};

FRP.createStream = function(name, type, target, event) {
  if (this.streams[name]) throw new Error('stream already defined');
  this.streams[name] = flyd.stream();
};

FRP.returnStream = function(name) {
  return this.streams[name];
};

FRP.addEventListenerToStream = function(name, target, event) {
  target.addEventListener(event, this.streams[name]);
};

FRP.listenToStream = function(name, callback) {
  flyd.on(function(data) { callback(data); }, this.streams[name]);
};

export { FRP };

////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////
//////////////////////////.        /////////////////////////
/////////////////////     .      ..  ...////////////////////
///////////////////    ..  .   ....    .  ./////////////////
//////////////////        . .  . ...  . ... ////////////////
/////////////////     ...................   ////////////////
/////////////////  .(,(/.%,.*%#&&&.//....   ////////////////
/////////////////  .***/..*,*/%,%%#%*/(/(. ,* //////////////
////////////////( ******  #%#((&%%*&///%%*..(.//////////////
/////////////////(/,((//**&.*,%%(*//.**##, .#(//////////////
///////////////( .(,**....* ...,*,,,%&,((*.* .//////////////
///////////////( . **..(*#/ %%%%#,*##,..*%,,.///////////////
////////////////(.,#/%#%%,#(%#(/&&(%,(.//#,..///////////////
//////////////////(,,/*#(.#/ /(&..%/&/(*(.//////////////////
///////////////////( ***#     .,.,/&%%%*.///////////////////
////////////////////(./,/*,,.,&*(((%%(/ ////////////////////
///////////////////////**.*.*//##.*,,,//////////////////////
///////////////////////  ,*%%/@//(*   ./////////////////////
//////////////////////                 /////////////////////
////////////////////                     ///////////////////
//////////////// . ... .. ..    ...    .. .. ///////////////
////....................................................////
